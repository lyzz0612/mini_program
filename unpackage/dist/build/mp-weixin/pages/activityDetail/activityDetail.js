"use strict";const t=require("../../common/vendor.js"),i={data:()=>({activityId:"",activityName:"",participants:[],maxParticipants:10,prizes:[],newParticipantName:""}),onLoad(i){if(!i.id)return t.index.showToast({title:"参数错误"}),void t.index.redirectTo({url:"/pages/index/index"});this.loadActivityDetail(i.id)},methods:{loadActivityDetail:function(i){const a=t.index.getStorageSync(i);if(!a)return t.index.showToast({title:"找不到该活动"}),void t.index.redirectTo({url:"/pages/index/index"});this.activityId=i,this.activityName=a.activityName,this.maxParticipants=a.maxParticipants,this.participants=a.participants,this.prizes=a.prizes},addParticipant:function(){this.newParticipantName?(this.participants.push(this.newParticipantName),this.newParticipantName=""):t.index.showToast({title:"请输入参与者名称",icon:"none"})},removeParticipant:function(t){const{index:i}=t.currentTarget.dataset;this.participants.splice(i,1)},startActivity:function(){if(0==this.participants.length)return void t.index.showToast({icon:"error",title:"请至少添加1位参与者"});const i=this.activityId;let a=t.index.getStorageSync(i);a.participants=this.participants,t.index.setStorageSync(i,a),t.index.redirectTo({url:`/pages/activityLogic/activityLogic?id=${i}`})},saveActivity:function(){const i=this.activityId;let a=t.index.getStorageSync(i);a.participants=this.participants,t.index.setStorageSync(i,a)}}};const a=t._export_sfc(i,[["render",function(i,a,e,n,c,r){return t.e({a:c.activityName,b:c.maxParticipants,c:t.f(c.prizes,((i,a,e)=>({a:t.t(i.type),b:t.t(i.name),c:t.t(i.amount),d:a}))),d:t.f(c.participants,((i,a,e)=>({a:t.t(i),b:a,c:t.o(((...t)=>r.removeParticipant&&r.removeParticipant(...t)),a),d:a}))),e:c.participants.length<c.maxParticipants},c.participants.length<c.maxParticipants?{f:c.newParticipantName,g:t.o((t=>c.newParticipantName=t.detail.value)),h:t.o(((...t)=>r.addParticipant&&r.addParticipant(...t)))}:{},{i:t.o(((...t)=>r.saveActivity&&r.saveActivity(...t))),j:t.o(((...t)=>r.startActivity&&r.startActivity(...t)))})}]]);wx.createPage(a);
