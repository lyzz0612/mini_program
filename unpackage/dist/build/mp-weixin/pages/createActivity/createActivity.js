"use strict";const e=require("../../common/vendor.js"),i={data:()=>({prizeTypes:["无","一秀","二举","四进","三红","对堂","状元"],activityName:"博饼活动",maxParticipants:10,prizeName:"",prizeAmount:1,prizeType:"一秀",prizes:[]}),onLoad(){},methods:{onPickerChange:function(e){this.prizeType=this.prizeTypes[e.detail.value]},addPrize:function(){this.prizeName&&this.prizeAmount&&(this.prizes.push({name:this.prizeName,amount:this.prizeAmount,type:this.prizeType}),this.prizeName="")},removePrize:function(e){const{index:i}=e.currentTarget.dataset;this.prizes.splice(i,1)},newRandomId(){let e=Date.now().toString(20);return e+=Math.floor(1e4*Math.random()).toString(20),e},createActivity:function(){if(0==this.prizes.length)return void e.index.showToast({icon:"error",title:"请至少添加1种奖品"});if(this.maxParticipants<=0)return void e.index.showToast({icon:"error",title:"人数上限至少为1"});const i={id:this.newRandomId(),activityName:this.activityName,maxParticipants:this.maxParticipants,participants:[],prizes:this.prizes,records:[]};let t=e.index.getStorageSync("activitys")||[];t.push(i.id),e.index.setStorageSync("activitys",t),e.index.setStorageSync(i.id,i),e.index.showToast({title:"活动保存成功",icon:"success"}),e.index.redirectTo({url:`/pages/activityDetail/activityDetail?id=${i.id}`})},cloneActivity(){e.index.scanCode({success:i=>{let t=JSON.parse(i.result);e.index.setClipboardData({data:i.result}),this.activityName=t.activityName,this.maxParticipants=t.maxParticipants,this.prizes.length=0;for(let e of t.prizes)this.prizes.push(e)}})}}};const t=e._export_sfc(i,[["render",function(i,t,a,r,s,n){return{a:s.activityName,b:e.o((e=>s.activityName=e.detail.value)),c:s.maxParticipants,d:e.o((e=>s.maxParticipants=e.detail.value)),e:e.f(s.prizes,((i,t,a)=>({a:e.t(i.type),b:e.t(i.name),c:e.t(i.amount),d:e.o(((...e)=>n.removePrize&&n.removePrize(...e)),t),e:t,f:t}))),f:e.t(s.prizeType),g:s.prizeTypes,h:e.o(((...e)=>n.onPickerChange&&n.onPickerChange(...e))),i:s.prizeName,j:e.o((e=>s.prizeName=e.detail.value)),k:s.prizeAmount,l:e.o((e=>s.prizeAmount=e.detail.value)),m:e.o(((...e)=>n.addPrize&&n.addPrize(...e))),n:e.o(((...e)=>n.createActivity&&n.createActivity(...e))),o:e.o(((...e)=>n.cloneActivity&&n.cloneActivity(...e)))}}]]);wx.createPage(t);
