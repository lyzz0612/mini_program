"use strict";const e=require("../../common/vendor.js"),i={data:()=>({prizeTypes:["无","一秀","二举","四进","三红","对堂","状元"],activityName:"博饼活动",maxParticipants:10,prizeName:"",prizeAmount:1,prizeType:"一秀",prizes:[]}),onLoad(){},methods:{onPickerChange:function(e){this.prizeType=this.prizeTypes[e.detail.value]},addPrize:function(){this.prizeName&&this.prizeAmount&&(this.prizes.push({name:this.prizeName,amount:this.prizeAmount,type:this.prizeType}),this.prizeName="")},removePrize:function(e){const{index:i}=e.currentTarget.dataset;this.prizes.splice(i,1)},newRandomId(){let e=Date.now().toString(20);return e+=Math.floor(1e4*Math.random()).toString(20),e},createActivity:function(){if(0==this.prizes.length)return void e.index.showToast({icon:"error",title:"请至少添加1种奖品"});if(this.maxParticipants<=0)return void e.index.showToast({icon:"error",title:"人数上限至少为1"});const i={id:this.newRandomId(),activityName:this.activityName,maxParticipants:this.maxParticipants,participants:[],prizes:this.prizes,records:[]};let t=e.index.getStorageSync("activitys")||[];t.push(i.id),e.index.setStorageSync("activitys",t),e.index.setStorageSync(i.id,i),e.index.showToast({title:"活动保存成功",icon:"success"}),e.index.redirectTo({url:`/pages/activityDetail/activityDetail?id=${i.id}`})}}};const t=e._export_sfc(i,[["render",function(i,t,a,r,n,o){return{a:n.activityName,b:e.o((e=>n.activityName=e.detail.value)),c:n.maxParticipants,d:e.o((e=>n.maxParticipants=e.detail.value)),e:e.f(n.prizes,((i,t,a)=>({a:e.t(i.type),b:e.t(i.name),c:e.t(i.amount),d:e.o(((...e)=>o.removePrize&&o.removePrize(...e)),t),e:t,f:t}))),f:e.t(n.prizeType),g:n.prizeTypes,h:e.o(((...e)=>o.onPickerChange&&o.onPickerChange(...e))),i:n.prizeName,j:e.o((e=>n.prizeName=e.detail.value)),k:n.prizeAmount,l:e.o((e=>n.prizeAmount=e.detail.value)),m:e.o(((...e)=>o.addPrize&&o.addPrize(...e))),n:e.o(((...e)=>o.createActivity&&o.createActivity(...e)))}}]]);wx.createPage(t);
