"use strict";const i=require("../../common/vendor.js"),t={data:()=>({isFinished:!1,activityListType:"activitys",activities:[]}),onLoad(i){let t=i.key||"activitys";this.activityListType=t,this.loadActivities(t),this.isFinished="activitys"!=t},onShow(){this.loadActivities(this.activityListType)},methods:{loadActivities(t){this.activities.length=0;const e=i.index.getStorageSync(t)||[];for(let s of e){let t=i.index.getStorageSync(s);t&&this.activities.push(t)}},viewActivity(t){const e=t.currentTarget.dataset.id;this.isFinished?i.index.navigateTo({url:`/pages/activityResult/activityResult?id=${e}`}):i.index.navigateTo({url:`/pages/activityDetail/activityDetail?id=${e}`})},deleteActivity(t){const e=t.currentTarget.dataset.id;let s=this.activities.findIndex((i=>i.id==e));if(s<0)return;this.activities.splice(s,1);let c=i.index.getStorageSync("activitys")||[];s=c.indexOf(e),s<0||(c.splice(s,1),i.index.setStorageSync("activitys",c),i.index.removeStorageSync(e),i.index.showToast({title:"活动已删除",icon:"success",duration:2e3}))},shareActivity(t){const e=t.currentTarget.dataset.id;let s=i.index.getStorageSync(e);delete s.id,delete s.records,i.index.previewImage({urls:[`https://qrcode.tec-it.com/API/QRCode?data=${JSON.stringify(s)}&backcolor=%23ffffff"`]})}}};const e=i._export_sfc(t,[["render",function(t,e,s,c,a,d){return i.e({a:0==a.activities.length},(a.activities.length,{}),{b:i.f(a.activities,((t,e,s)=>i.e({a:i.t(t.activityName),b:i.t(t.prizes.length),c:t.id,d:i.o(((...i)=>d.shareActivity&&d.shareActivity(...i)),t.id)},a.isFinished?{}:{e:t.id,f:i.o(((...i)=>d.deleteActivity&&d.deleteActivity(...i)),t.id)},{g:t.id,h:i.o(((...i)=>d.viewActivity&&d.viewActivity(...i)),t.id),i:t.id}))),c:!a.isFinished})}]]);wx.createPage(e);
